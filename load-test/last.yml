kind: Module
type: container
name: load-test
services:
  - name: load-test
    ports:
      - name: http
        containerPort: 8080
        servicePort: 80
    resources:
      limits:
        cpu: 100m
        memory: 250Mi
    healthCheck:
      httpGet:
        path: /
        port: http
    dependencies:
      - backend

tasks:
  - name: run-load-test
    command:
      - ab
      - -n
      - "1000"
      - -c
      - "10"
      - http://backend:80/
    dependencies:
      - backend
